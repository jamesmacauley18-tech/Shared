<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Mystery of Love</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.0/crypto-js.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lora:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Lora', serif;
            background: linear-gradient(135deg, #ffeef8 0%, #ffb3d9 50%, #ff85c0 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            box-shadow: 0 30px 80px rgba(255, 20, 147, 0.2);
            max-width: 700px;
            width: 100%;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .admin-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            box-shadow: 0 30px 80px rgba(26, 26, 46, 0.2);
            max-width: 900px;
            width: 100%;
            overflow: hidden;
            display: none;
            backdrop-filter: blur(10px);
        }
        
        .admin-container.active {
            display: block;
        }
        
        .header {
            background: linear-gradient(135deg, #ff1493 0%, #c71585 100%);
            color: white;
            padding: 80px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }
        
        .floating-heart {
            position: absolute;
            font-size: 40px;
            opacity: 0.6;
            animation: float-and-spin 6s ease-in-out infinite;
        }
        
        .heart1 { top: 15%; left: 10%; animation-delay: 0s; }
        .heart2 { top: 30%; right: 15%; animation-delay: 1s; }
        .heart3 { bottom: 20%; left: 20%; animation-delay: 2s; }
        .heart4 { bottom: 10%; right: 10%; animation-delay: 3s; }
        
        @keyframes float-and-spin {
            0%, 100% {
                transform: translateY(0) rotateZ(0deg);
                opacity: 0.4;
            }
            25% {
                transform: translateY(-30px) rotateZ(10deg);
                opacity: 0.8;
            }
            50% {
                transform: translateY(-60px) rotateZ(0deg);
                opacity: 0.6;
            }
            75% {
                transform: translateY(-30px) rotateZ(-10deg);
                opacity: 0.8;
            }
        }
        
        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 52px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
            font-weight: 700;
        }
        
        .header p {
            font-size: 18px;
            position: relative;
            z-index: 1;
            letter-spacing: 2px;
            font-weight: 500;
            margin: 10px 0;
        }
        
        .person-name {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            color: #ffb3d9;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.1);
        }
        
        .content {
            padding: 50px 35px;
        }
        
        .admin-content {
            padding: 30px;
        }
        
        .intro-section {
            display: block;
            text-align: center;
        }
        
        .intro-section.hidden {
            display: none;
        }
        
        .intro-message {
            font-size: 18px;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.8;
            animation: fadeInDown 1s ease-out;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .start-button {
            display: inline-block;
            background: linear-gradient(135deg, #ff1493 0%, #c71585 100%);
            color: white;
            padding: 16px 50px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.4);
            animation: pulse 2.5s ease-in-out infinite;
            margin: 15px;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }
        
        .start-button:hover {
            transform: scale(1.12);
            box-shadow: 0 12px 35px rgba(255, 20, 147, 0.6);
        }
        
        .puzzle-container {
            display: none;
        }
        
        .puzzle-container.active {
            display: block;
            animation: fadeIn 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .puzzle-title {
            font-family: 'Playfair Display', serif;
            font-size: 36px;
            color: #c71585;
            margin-bottom: 30px;
            animation: slideDown 0.8s ease-out;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .riddle-card {
            background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 100%);
            border: 3px solid #ff1493;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            animation: slideInUp 0.8s ease-out;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.15);
        }
        
        .riddle-text {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            color: #333;
            line-height: 1.9;
            margin-bottom: 30px;
            font-weight: 500;
            text-align: center;
            font-style: italic;
        }
        
        .riddle-input-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .riddle-input-area input {
            padding: 14px 18px;
            font-size: 16px;
            border: 2px solid #ff1493;
            border-radius: 12px;
            font-family: 'Lora', serif;
            transition: all 0.3s;
            background: white;
        }
        
        .riddle-input-area input:focus {
            outline: none;
            border-color: #c71585;
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.3);
            background: #fffbfd;
        }
        
        .riddle-input-area button {
            background: linear-gradient(135deg, #ff1493 0%, #c71585 100%);
            color: white;
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 20, 147, 0.3);
        }
        
        .riddle-input-area button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(255, 20, 147, 0.5);
        }
        
        .riddle-input-area button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            display: none;
            animation: slideDown 0.4s ease-out;
        }
        
        .feedback.show {
            display: block;
        }
        
        .feedback.correct {
            background: linear-gradient(135deg, #90EE90 0%, #32CD32 100%);
            color: white;
            box-shadow: 0 0 15px rgba(50, 205, 50, 0.5);
        }
        
        .feedback.incorrect {
            background: linear-gradient(135deg, #FFB6C6 0%, #FF69B4 100%);
            color: white;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
        }
        
        .progress-bar-container {
            width: 100%;
            height: 10px;
            background: #ddd;
            border-radius: 10px;
            margin: 35px 0;
            overflow: hidden;
            border: 2px solid #ff1493;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff1493 0%, #c71585 100%);
            transition: width 0.6s ease;
            box-shadow: 0 0 10px rgba(255, 20, 147, 0.5);
        }
        
        .puzzle-message {
            font-size: 18px;
            color: #ff1493;
            font-weight: bold;
            margin: 25px 0;
        }
        
        .revealed-section {
            display: none;
        }
        
        .revealed-section.show {
            display: block;
            animation: slideInUp 0.8s ease-out;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .revealed-message {
            background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 100%);
            padding: 40px;
            border-radius: 20px;
            border: 3px solid #ff1493;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.15);
        }
        
        .revealed-message h2 {
            font-family: 'Playfair Display', serif;
            color: #c71585;
            font-size: 36px;
            margin-bottom: 20px;
            animation: bounceIn 1s ease-out;
        }
        
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.7);
            }
            50% {
                opacity: 1;
                transform: scale(1.08);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .grade-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 5px solid #ff1493;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .grade-title {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            color: #c71585;
            margin-bottom: 15px;
        }
        
        .grade-result {
            font-size: 20px;
            color: #333;
            margin: 15px 0;
            line-height: 1.6;
        }
        
        .pass-message {
            color: #32CD32;
            font-weight: bold;
        }
        
        .fail-message {
            color: #FF6B6B;
            font-weight: bold;
        }
        
        .secret-section {
            background: linear-gradient(135deg, #fff9f0 0%, #fff0f5 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            border: 2px dashed #ffb3d9;
            text-align: center;
        }
        
        .secret-title {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            color: #c71585;
            margin-bottom: 15px;
        }
        
        .secret-text {
            font-size: 16px;
            color: #666;
            font-style: italic;
            line-height: 1.7;
        }
        
        .love-letter {
            background: white;
            border: 2px solid #ff1493;
            border-radius: 15px;
            padding: 35px;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.12);
        }
        
        .letter-content {
            font-size: 15px;
            color: #333;
            line-height: 1.9;
        }
        
        .letter-content p {
            margin: 15px 0;
        }
        
        .letter-content p:first-child {
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            font-weight: bold;
            color: #c71585;
        }
        
        .input-area {
            margin-top: 30px;
        }
        
        .input-area label {
            display: block;
            font-size: 18px;
            color: #c71585;
            font-weight: bold;
            margin-bottom: 15px;
            font-family: 'Playfair Display', serif;
        }
        
        .input-area input, .input-area textarea {
            width: 100%;
            padding: 14px 18px;
            font-size: 16px;
            border: 2px solid #ff1493;
            border-radius: 12px;
            font-family: 'Lora', serif;
            margin-bottom: 12px;
            transition: all 0.3s;
            background: white;
        }
        
        .input-area textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .input-area input:focus, .input-area textarea:focus {
            outline: none;
            border-color: #c71585;
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.3);
            background: #fffbfd;
        }
        
        .input-area button {
            background: linear-gradient(135deg, #ff1493 0%, #c71585 100%);
            color: white;
            padding: 14px 35px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 20, 147, 0.3);
        }
        
        .input-area button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(255, 20, 147, 0.5);
        }
        
        .submission-message {
            display: none;
            margin-top: 20px;
            padding: 18px;
            background: linear-gradient(135deg, #90EE90 0%, #32CD32 100%);
            color: white;
            border-radius: 12px;
            font-weight: bold;
            animation: slideDown 0.6s ease-out;
        }
        
        .submission-message.show {
            display: block;
        }
        
        .footer {
            background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
            padding: 35px;
            text-align: center;
            border-top: 3px solid #ff1493;
        }
        
        .footer p {
            color: #666;
            font-size: 14px;
            margin: 8px 0;
        }
        
        /* Admin Panel Styles */
        .admin-login {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 450px;
        }
        
        .login-form {
            background: #f5f5f5;
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            max-width: 450px;
            width: 100%;
        }
        
        .login-form h2 {
            color: #1a1a2e;
            margin-bottom: 25px;
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 28px;
        }
        
        .login-form input {
            width: 100%;
            padding: 12px 15px;
            margin: 12px 0;
            border: 2px solid #1a1a2e;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .login-form input:focus {
            outline: none;
            border-color: #ff1493;
            box-shadow: 0 0 10px rgba(255, 20, 147, 0.3);
        }
        
        .login-form button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .login-form button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(26, 26, 46, 0.5);
        }
        
        .admin-panel {
            display: none;
        }
        
        .admin-panel.active {
            display: block;
        }
        
        .admin-toolbar {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .admin-toolbar h2 {
            color: #1a1a2e;
            margin: 0;
            font-family: 'Playfair Display', serif;
        }
        
        .admin-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .admin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .admin-btn.logout {
            background: linear-gradient(135deg, #c71585 0%, #ff1493 100%);
        }
        
        .admin-settings {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        
        .admin-settings label {
            display: block;
            color: #1a1a2e;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .admin-settings input {
            width: 100%;
            padding: 10px;
            border: 2px solid #1a1a2e;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        .responses-container {
            display: grid;
            gap: 20px;
        }
        
        .response-card {
            background: #f5f5f5;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #ff1493;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .response-card h3 {
            color: #1a1a2e;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Playfair Display', serif;
        }
        
        .response-card p {
            color: #555;
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .score-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ff1493 0%, #c71585 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
        }
        
        .no-responses {
            text-align: center;
            padding: 50px;
            color: #999;
            font-size: 18px;
        }
        
        /* Celebration Animations */
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff1493;
            animation: confetti-fall 3s ease-out forwards;
        }
        
        @keyframes confetti-fall {
            0% {
                opacity: 1;
                transform: translateY(0) rotateZ(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(800px) rotateZ(720deg);
            }
        }
        
        .celebration-heart {
            position: absolute;
            font-size: 50px;
            animation: heart-burst 1.5s ease-out forwards;
        }
        
        @keyframes heart-burst {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }
        
        .heart-container {
            position: relative;
            width: 100%;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
        }
        
        .heart-particle {
            position: absolute;
            font-size: 30px;
            animation: form-heart 2.5s ease-in-out forwards;
        }
        
        @keyframes form-heart {
            0% {
                opacity: 0;
                transform: translate(0, 0) scale(0);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 1;
                transform: translate(var(--x), var(--y)) scale(1);
            }
        }
        
        /* Kissing Animation */
        .kiss-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            height: 120px;
        }
        
        .kiss-lips {
            font-size: 80px;
            animation: kiss-pucker 1.5s ease-in-out infinite;
        }
        
        .kiss-lips:nth-child(1) {
            animation-delay: 0s;
            transform-origin: right center;
        }
        
        .kiss-lips:nth-child(2) {
            animation-delay: 0s;
            transform-origin: left center;
        }
        
        @keyframes kiss-pucker {
            0%, 100% {
                transform: scaleX(1) translateY(0);
                opacity: 1;
            }
            25% {
                transform: scaleX(0.9) translateY(-5px);
                opacity: 0.8;
            }
            50% {
                transform: scaleX(0.7) translateY(-10px);
                opacity: 0.6;
            }
            75% {
                transform: scaleX(0.8) translateY(-5px);
                opacity: 0.8;
            }
        }
        
        .kiss-hearts {
            position: absolute;
            font-size: 24px;
            animation: kiss-float-up 2s ease-out forwards;
        }
        
        @keyframes kiss-float-up {
            0% {
                opacity: 1;
                transform: translateY(0) translateX(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) translateX(var(--tx)) scale(0.5);
            }
        }
        
        @media (max-width: 600px) {
            .header h1 {
                font-size: 40px;
            }
            
            .person-name {
                font-size: 28px;
            }
            
            .riddle-text {
                font-size: 20px;
            }
            
            .content {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Audio Elements for Sound Effects -->
    <audio id="romanticSound" preload="auto" style="display:none;">
        <source src="data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAAB9AAACABAAZGF0YQIAAAAAAA==" type="audio/wav">
    </audio>
    <audio id="kissSound" preload="auto" style="display:none;">
        <source src="data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAAB9AAACABAAZGF0YQIAAAAAAA==" type="audio/wav">
    </audio>
    
    <!-- Celebration Container -->
    <div class="celebration" id="celebration"></div>
    
    <!-- Main Container -->
    <div class="container" id="mainContainer">
        <div class="header">
            <div class="floating-heart heart1">üíï</div>
            <div class="floating-heart heart2">üíï</div>
            <div class="floating-heart heart3">üíï</div>
            <div class="floating-heart heart4">üíï</div>
            <h1>A Mystery of Love</h1>
            <p>For My Beloved</p>
            <p class="person-name" id="displayName">Khadijah Mansaray</p>
            <button class="start-button" style="position: absolute; top: 15px; right: 15px; padding: 8px 15px; font-size: 12px;" onclick="goToAdmin()">üîê Admin</button>
        </div>
        
        <div class="content">
            <!-- Introduction Section -->
            <div class="intro-section" id="introSection">
                <div class="intro-message">
                    <p>‚ú® A Test of True Love ‚ú®</p>
                </div>
                <div class="intro-message">
                    <p>My dearest love, before we go any further, I need to know the truth. I have some questions‚Äîdeep, real, and sometimes tricky‚Äîthat go straight to your heart. These questions will test if you truly love me for who I am, not for what I can give you.</p>
                </div>
                <div class="intro-message">
                    <p>Answer with complete honesty. This is my way of saying: I need to know I can trust you with my heart. Can you prove to me that your love is real? üíï</p>
                </div>
                <button class="start-button" onclick="startPuzzle()" title="Press Space or Click to Start">
                    üíï Test My Heart üíï
                </button>
                <p style="font-size: 12px; color: #999; margin-top: 15px;">üí° Tip: Press Space or Enter to start</p>
            </div>
            
            <!-- Puzzle Section -->
            <div class="puzzle-container" id="puzzleContainer">
                <div class="puzzle-title">üíï Questions From My Heart</div>
                <div class="puzzle-message" id="riddleCounter">Question 1 of 10</div>
                
                <div class="riddle-card" id="riddleCard">
                    <div class="riddle-text" id="riddleText"></div>
                    <div class="riddle-input-area">
                        <input 
                            type="text" 
                            id="riddleAnswer" 
                            placeholder="Tell me the truth, please..."
                            onkeypress="handleKeyPress(event)"
                            autocomplete="off"
                        >
                        <button onclick="checkRiddleAnswer()">Share Your Heart</button>
                    </div>
                    <div class="feedback" id="feedback"></div>
                </div>
                
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
                
                <!-- Revealed Section -->
                <div class="revealed-section" id="revealedSection">
                    <div class="revealed-message">
                        <h2>üéâ You Did It! üéâ</h2>
                        <div class="heart-container" id="heartContainer"></div>
                        
                        <div class="grade-section">
                            <div class="grade-title">Your Performance</div>
                            <div class="grade-result">
                                You answered <span id="gradeScore">0</span> out of 10 questions correctly.
                            </div>
                            <div class="grade-result" id="gradeMessage"></div>
                        </div>
                        
                        <!-- Kissing Animation -->
                        <div class="kiss-container" id="kissContainer">
                            <div class="kiss-lips">üëÑ</div>
                            <div class="kiss-lips">üëÑ</div>
                        </div>
                        
                        <div class="love-letter">
                            <div class="letter-content">
                                <p>My Dearest <span id="letterName">Khadijah</span>,</p>
                                <p>Every moment with you feels like a riddle I finally understand. Your smile is the answer to every question my heart has ever asked. In this vast, complicated world, you are the only certainty I need.</p>
                                <p>I'm not perfect, and I can't give you everything materialistic. But what I can give you is something far more precious‚Äîa love so genuine, so deep, that it transcends all earthly treasures.</p>
                                <p>You complete me in ways I never thought possible. You inspire me, challenge me, and make me believe in forever. With you, I don't just exist‚ÄîI truly live.</p>
                                <p>Thank you for choosing to walk this journey with me. Thank you for every laugh, every tear, every moment we've shared.</p>
                                <p style="margin-top: 30px;">Forever yours, with all my heart,<br><strong id="senderName">James</strong></p>
                            </div>
                        </div>
                        
                        <div class="secret-section">
                            <div class="secret-title">ü§´ A Secret Question</div>
                            <div class="secret-text">
                                <p>This stays just between us... I want to know your deepest thoughts about me. What do you love most about us together?</p>
                            </div>
                        </div>
                        
                        <div class="input-area">
                            <label>üí≠ Your Secret Thought:</label>
                            <textarea 
                                id="secretInput" 
                                placeholder="Tell me what's in your heart... This is private, just for us üíï"
                                maxlength="500"
                            ></textarea>
                            <button onclick="submitSecret()">Share My Heart üíò</button>
                            <div class="submission-message" id="secretMessage">
                                ‚ú® Your secret has been safely kept. ‚ú®
                            </div>
                        </div>
                        
                        <div class="input-area">
                            <label>üéÅ What Do You Want For Valentine's Day?</label>
                            <textarea 
                                id="valentineInput" 
                                placeholder="Tell me what would make you happy... üíù"
                                maxlength="500"
                            ></textarea>
                            <button onclick="submitValentineWish()">Tell Me Your Wish üíå</button>
                            <div class="submission-message" id="submissionMessage">
                                ‚ú® Your wish has been received with all my love. I'll make it come true. ‚ú®
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>With All My Love ‚ù§Ô∏è</p>
        </div>
    </div>
    
    <!-- Admin Container -->
    <div class="admin-container" id="adminContainer">
        <div class="admin-header">
            <h1>üîê Admin Dashboard</h1>
            <p>Manage your Valentine Challenge</p>
        </div>
        
        <div class="admin-content">
            <!-- Login Section -->
            <div class="admin-login" id="adminLogin">
                <div class="login-form">
                    <h2>üîê Admin Login</h2>
                    <input type="password" id="adminPassword" placeholder="Enter Admin Password" onkeypress="if(event.key==='Enter') adminLogin()">
                    <button onclick="adminLogin()">Login</button>
                </div>
            </div>
            
            <!-- Admin Panel -->
            <div class="admin-panel" id="adminPanel">
                <div class="admin-toolbar">
                    <h2>üìä Dashboard</h2>
                    <button class="admin-btn logout" onclick="adminLogout()">üö™ Logout</button>
                </div>
                
                <div class="admin-settings">
                    <label>üë§ Recipient's Name:</label>
                    <input type="text" id="recipientName" placeholder="e.g., Khadijah Mansaray" onchange="updateRecipientName()">
                    <label>üìù Your Name:</label>
                    <input type="text" id="senderNameInput" placeholder="e.g., James" onchange="updateSenderName()">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <p style="color: #1a1a2e; font-weight: bold;">Total Responses: <span id="totalResponses">0</span></p>
                </div>
                
                <div id="responsesContainer" class="responses-container">
                    <div class="no-responses">No responses yet. Share the link to get started!</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const ADMIN_PASSWORD = "12345678910";
        const ENCRYPTION_KEY = "valentine-secret-2026";
        
        const riddles = [
            {
                question: "What is one thing I did that made you fall in love with me? Describe a specific moment or quality that captured your heart.",
                answer: "love|care|kind|thoughtful|listen|patient|honest|genuine|real|understand|support|gentle|smile|laugh|make me",
                isPersonal: true,
                acceptPartial: true
            },
            {
                question: "If I lost everything tomorrow‚Äîmy job, my money, my status‚Äîand could only give you my time and love, would you stay with me? Be completely honest.",
                answer: "yes|stay|always|forever|still|would|definitely|absolutely|of course|together|love|you|heart",
                isPersonal: true,
                acceptPartial: true,
                isTricky: true
            },
            {
                question: "You've been with older, wealthier men before. What's different about me? What do I offer you that money can't buy?",
                answer: "love|genuine|real|honest|respect|trust|understanding|future|different|treat|value|matter|see|believe|worthy",
                isPersonal: true,
                acceptPartial: true
            },
            {
                question: "When you imagine our future together‚Äî5 years from now‚Äîwhat does it look like? Paint me a picture of what we could be.",
                answer: "happy|together|family|home|grow|build|strong|married|children|success|stable|love|peaceful|plan|goal",
                isPersonal: true,
                acceptPartial: true
            },
            {
                question: "How do I make you feel? Not what I do, but how do I make you FEEL inside when you're with me or think of me?",
                answer: "safe|secure|loved|valued|beautiful|special|important|happy|content|peaceful|cared|protected|wanted|cherished",
                isPersonal: true,
                acceptPartial: true
            },
            {
                question: "What's something you wish I would do more of? What would make you feel even more loved and appreciated by me?",
                answer: "listen|time|attention|compliment|help|support|spend|hug|kiss|care|show|tell|remember|romantic|sweet",
                isPersonal: true,
                acceptPartial: true
            },
            {
                question: "Have you ever doubted our relationship? If yes, what made you doubt it and what brought you back to me?",
                answer: "yes|no|sometimes|once|rarely|never|doubted|trust|faith|believe|came back|stayed|love|chose|commitment",
                isPersonal: true,
                acceptPartial: true,
                isTricky: true
            },
            {
                question: "What's the biggest sacrifice you've made for our relationship, and was it worth it?",
                answer: "yes|worth|time|family|work|friends|effort|love|willing|happy|gave|sacrifice|chose|stay|commitment",
                isPersonal: true,
                acceptPartial: true
            },
            {
                question: "If your family or friends told you to leave me, would you listen to them or would you trust your heart about us?",
                answer: "trust|heart|you|stay|leave them|believe|love|choose|follow|stay with|my heart|my feelings|my decision",
                isPersonal: true,
                acceptPartial: true,
                isTricky: true
            },
            {
                question: "Complete this: 'I love you because...' Tell me the real, deep reasons‚Äînot just the surface.",
                answer: "you|care|kind|real|honest|listen|support|make me|treat|respect|understand|genuine|true|different|special",
                isPersonal: true,
                acceptPartial: true
            }
        ];
        
        let currentRiddleIndex = 0;
        let score = 0;
        let recipientName = 'Khadijah Mansaray';
        let senderName = 'James';
        let allAnswers = []; // Track all Q&A responses
        
        // Audio management
        let backgroundOscillator = null;
        let backgroundGainNode = null;
        let audioContext = null;
        let isPlayingBackgroundMusic = false;
        
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('valentineSettings')) || {};
            if (settings.recipientName) {
                recipientName = settings.recipientName;
                document.getElementById('displayName').textContent = recipientName;
                document.getElementById('letterName').textContent = recipientName;
            }
            if (settings.senderName) {
                senderName = settings.senderName;
                document.getElementById('senderName').textContent = senderName;
            }
        }
        
        function updateRecipientName() {
            recipientName = document.getElementById('recipientName').value || 'Khadijah Mansaray';
            document.getElementById('displayName').textContent = recipientName;
            document.getElementById('letterName').textContent = recipientName;
            saveSettings();
        }
        
        function updateSenderName() {
            senderName = document.getElementById('senderNameInput').value || 'James';
            document.getElementById('senderName').textContent = senderName;
            saveSettings();
        }
        
        function saveSettings() {
            localStorage.setItem('valentineSettings', JSON.stringify({
                recipientName: recipientName,
                senderName: senderName
            }));
        }
        
        function startPuzzle() {
            try {
                document.getElementById('introSection').classList.add('hidden');
                document.getElementById('puzzleContainer').classList.add('active');
                score = 0;
                currentRiddleIndex = 0;
                allAnswers = []; // Reset answers
                startBackgroundMusic(); // Start romantic background music
                loadRiddle();
                console.log('üéµ Puzzle started with background music');
            } catch(error) {
                console.error('Error starting puzzle:', error);
                alert('There was an error starting the puzzle. Please refresh the page and try again.');
            }
        }
        
        function loadRiddle() {
            const riddle = riddles[currentRiddleIndex];
            document.getElementById('riddleText').textContent = riddle.question;
            document.getElementById('riddleAnswer').value = '';
            document.getElementById('riddleAnswer').disabled = false;
            document.getElementById('riddleAnswer').focus();
            document.getElementById('feedback').textContent = '';
            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('riddleCounter').textContent = `Question ${currentRiddleIndex + 1} of ${riddles.length}`;
            
            updateProgressBar();
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !document.getElementById('riddleAnswer').disabled) {
                checkRiddleAnswer();
            }
        }
        
        function checkRiddleAnswer() {
            const userAnswer = document.getElementById('riddleAnswer').value.trim().toLowerCase();
            const currentRiddle = riddles[currentRiddleIndex];
            const feedback = document.getElementById('feedback');
            
            if (!userAnswer) {
                feedback.textContent = '‚ö†Ô∏è Please share your thoughts with me...';
                feedback.classList.add('show', 'incorrect');
                return;
            }
            
            let isCorrect = false;
            
            // For personal questions with partial matching
            if (currentRiddle.acceptPartial && currentRiddle.answer) {
                const answerOptions = currentRiddle.answer.split('|');
                isCorrect = answerOptions.some(option => userAnswer.includes(option));
            } else {
                // Exact match for traditional riddles
                isCorrect = userAnswer === currentRiddle.answer.toLowerCase();
            }
            
            if (isCorrect) {
                score++;
                // Save this Q&A pair
                allAnswers.push({
                    question: currentRiddle.question,
                    answer: userAnswer,
                    correct: true,
                    questionNumber: currentRiddleIndex + 1
                });
                
                if (currentRiddle.isTricky) {
                    feedback.textContent = 'üíï I needed to hear that... You passed my test. I believe you... üíö';
                } else {
                    feedback.textContent = '‚ú® That\'s exactly how I feel about you too! üíï';
                }
                feedback.classList.add('show', 'correct');
                triggerCorrectAnimation();
                document.getElementById('riddleAnswer').disabled = true;
                const submitBtn = document.querySelector('.riddle-input-area button');
                if (submitBtn) {
                    submitBtn.disabled = true;
                }
                
                setTimeout(() => {
                    if (currentRiddleIndex < riddles.length - 1) {
                        currentRiddleIndex++;
                        loadRiddle();
                    } else {
                        showCompletionScreen();
                    }
                }, 2500);
            } else {
                // Save incorrect answer too
                allAnswers.push({
                    question: currentRiddle.question,
                    answer: userAnswer,
                    correct: false,
                    questionNumber: currentRiddleIndex + 1
                });
                
                if (currentRiddle.isTricky) {
                    feedback.textContent = 'ü§î Be honest with me... I need to know the truth in your heart...';
                } else {
                    feedback.textContent = 'üí≠ I don\'t think that\'s what you really mean... Be sincere with me...';
                }
                feedback.classList.add('show', 'incorrect');
                document.getElementById('riddleAnswer').style.animation = 'shake 0.5s';
                setTimeout(() => {
                    document.getElementById('riddleAnswer').style.animation = '';
                }, 500);
            }
        }
        
        function updateProgressBar() {
            const progress = ((currentRiddleIndex) / riddles.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function triggerCorrectAnimation() {
            const celebration = document.getElementById('celebration');
            playSound('correct');
            
            // Confetti
            for (let i = 0; i < 25; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = ['#ff1493', '#c71585', '#ffb6d9'][Math.floor(Math.random() * 3)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                celebration.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
            
            // Hearts
            for (let i = 0; i < 8; i++) {
                const heart = document.createElement('div');
                heart.className = 'celebration-heart';
                heart.textContent = 'üíï';
                const angle = (i / 8) * Math.PI * 2;
                const distance = 200;
                heart.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
                heart.style.setProperty('--ty', Math.sin(angle) * distance + 'px');
                heart.style.left = '50%';
                heart.style.top = '50%';
                heart.style.marginLeft = '-25px';
                heart.style.marginTop = '-25px';
                celebration.appendChild(heart);
                
                setTimeout(() => heart.remove(), 1500);
            }
        }
        
        // Sound Effect Functions
        function startBackgroundMusic() {
            // Start continuous background music during quiz
            if (isPlayingBackgroundMusic) return;
            
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                // Stop any previous music
                stopBackgroundMusic();
                
                // Create oscillator for romantic background music
                backgroundOscillator = audioContext.createOscillator();
                backgroundGainNode = audioContext.createGain();
                
                backgroundOscillator.connect(backgroundGainNode);
                backgroundGainNode.connect(audioContext.destination);
                
                // Use 432Hz (love frequency) for smooth romantic vibe
                backgroundOscillator.frequency.value = 432;
                backgroundOscillator.type = 'sine';
                
                // Soft volume so it doesn't overpower
                backgroundGainNode.gain.setValueAtTime(0.08, audioContext.currentTime);
                
                backgroundOscillator.start(audioContext.currentTime);
                isPlayingBackgroundMusic = true;
                console.log('üéµ Background music started...');
            } catch(e) {
                console.log('Audio context error:', e);
            }
        }
        
        function stopBackgroundMusic() {
            try {
                if (backgroundOscillator && isPlayingBackgroundMusic) {
                    // Fade out smoothly
                    const currentTime = audioContext.currentTime;
                    backgroundGainNode.gain.setValueAtTime(backgroundGainNode.gain.value, currentTime);
                    backgroundGainNode.gain.exponentialRampToValueAtTime(0.001, currentTime + 1);
                    
                    backgroundOscillator.stop(currentTime + 1);
                    isPlayingBackgroundMusic = false;
                    console.log('üéµ Background music stopped...');
                }
            } catch(e) {
                console.log('Error stopping music:', e);
            }
        }
        
        function playSound(type) {
            // Create a simple beep sound using Web Audio API
            if (type === 'correct') {
                playBeep(800, 0.1); // Higher pitch for correct
            } else if (type === 'kiss') {
                playBeep(600, 0.15); // Romantic kiss sound
            } else if (type === 'perfect') {
                // Special perfect score sound - ascending notes
                playPerfectSound();
            }
        }
        
        function playBeep(frequency, duration) {
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch(e) {
                console.log('Audio not available');
            }
        }
        
        function playPerfectSound() {
            // Play ascending notes for perfect score (C-E-G chord progression)
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                const frequencies = [523.25, 659.25, 783.99]; // C, E, G notes
                const currentTime = audioContext.currentTime;
                
                frequencies.forEach((freq, index) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = freq;
                    oscillator.type = 'sine';
                    
                    const startTime = currentTime + (index * 0.15);
                    const duration = 0.4;
                    
                    gainNode.gain.setValueAtTime(0.4, startTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);
                    
                    oscillator.start(startTime);
                    oscillator.stop(startTime + duration);
                });
            } catch(e) {
                console.log('Audio not available');
            }
        }
        
        // Kissing Animation with Floating Hearts
        function triggerKissAnimation() {
            playSound('kiss');
            const kissContainer = document.getElementById('kissContainer');
            const celebration = document.getElementById('celebration');
            
            // Create floating hearts from kiss animation
            for (let i = 0; i < 6; i++) {
                const heart = document.createElement('div');
                heart.className = 'kiss-hearts';
                heart.textContent = 'üíã';
                heart.style.left = (kissContainer.offsetLeft + kissContainer.offsetWidth / 2) + 'px';
                heart.style.top = (kissContainer.offsetTop + kissContainer.offsetHeight / 2) + 'px';
                heart.style.setProperty('--tx', (Math.random() - 0.5) * 100 + 'px');
                celebration.appendChild(heart);
                
                setTimeout(() => heart.remove(), 2000);
            }
        }
        
        function showCompletionScreen() {
            // Save all Q&A responses
            const timestamp = new Date().toLocaleString();
            const qaData = {
                type: 'questions',
                name: recipientName,
                answers: allAnswers,
                score: score,
                totalQuestions: riddles.length,
                submittedAt: timestamp,
                from: senderName
            };
            
            const encrypted = CryptoJS.AES.encrypt(JSON.stringify(qaData), ENCRYPTION_KEY).toString();
            let responses = JSON.parse(localStorage.getItem('valentineResponses')) || [];
            responses.push(encrypted);
            localStorage.setItem('valentineResponses', JSON.stringify(responses));
            
            console.log('‚úÖ ALL QUESTIONS & ANSWERS SAVED');
            console.log('Total Score: ' + score + '/' + riddles.length);
            
            showCelebration();
            document.getElementById('revealedSection').classList.add('show');
            createHeartFormation();
            showGrade();
            
            // Trigger kiss animation after a moment
            setTimeout(() => {
                triggerKissAnimation();
            }, 1500);
            
            loadSettings();
            document.getElementById('secretInput').focus();
        }
        
        function showCelebration() {
            const celebration = document.getElementById('celebration');
            
            for (let i = 0; i < 60; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = Math.random() * 20 + '%';
                confetti.style.backgroundColor = ['#ff1493', '#c71585', '#ffb6d9', '#ffd700'][Math.floor(Math.random() * 4)];
                confetti.style.animationDelay = Math.random() * 0.3 + 's';
                celebration.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
            
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'celebration-heart';
                heart.textContent = 'üíï';
                heart.style.fontSize = '60px';
                const angle = (i / 20) * Math.PI * 2;
                const distance = 300;
                heart.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
                heart.style.setProperty('--ty', Math.sin(angle) * distance + 'px');
                heart.style.left = '50%';
                heart.style.top = '50%';
                heart.style.marginLeft = '-30px';
                heart.style.marginTop = '-30px';
                celebration.appendChild(heart);
                
                setTimeout(() => heart.remove(), 1500);
            }
        }
        
        function createHeartFormation() {
            const heartContainer = document.getElementById('heartContainer');
            heartContainer.innerHTML = '';
            
            const positions = [
                [0, -50], [20, -60], [-20, -60],
                [40, -25], [-40, -25], [55, 0], [-55, 0],
                [60, 30], [-60, 30], [45, 55], [-45, 55],
                [20, 70], [-20, 70], [0, 85]
            ];
            
            positions.forEach((pos, index) => {
                const heart = document.createElement('div');
                heart.className = 'heart-particle';
                heart.textContent = 'üíï';
                heart.style.setProperty('--x', pos[0] + 'px');
                heart.style.setProperty('--y', pos[1] + 'px');
                heart.style.animationDelay = (index * 0.1) + 's';
                heartContainer.appendChild(heart);
            });
        }
        
        function showGrade() {
            const gradeScore = document.getElementById('gradeScore');
            const gradeMessage = document.getElementById('gradeMessage');
            
            gradeScore.textContent = score;
            
            if (score === 10) {
                playSound('perfect'); // Play perfect score sound
                gradeMessage.innerHTML = '<span class="pass-message">üåü PERFECT! 10/10! You aced every single question! Your love is pure, genuine, and unwavering. You truly ARE my soulmate! I have no more doubts. üåüüíï</span>';
            } else if (score === 9) {
                gradeMessage.innerHTML = '<span class="pass-message">‚ú® EXCELLENT! 9/10! You answered almost perfectly. Your love is real and deep. I trust you completely! ‚ú®üíï</span>';
            } else if (score === 8) {
                gradeMessage.innerHTML = '<span class="pass-message">üíö VERY GOOD! 8/10! You showed genuine love and commitment. You passed my heart\'s test! üíö</span>';
            } else if (score === 7) {
                gradeMessage.innerHTML = '<span class="pass-message">üíï GOOD! 7/10! You passed! You showed real care and understanding. Let\'s grow stronger together! üíï</span>';
            } else if (score === 6) {
                gradeMessage.innerHTML = '<span class="pass-message">ü§î DECENT! 6/10! You passed, but I sense hesitation. Let\'s talk more openly about us. ü§î</span>';
            } else if (score === 5) {
                gradeMessage.innerHTML = '<span class="pass-message">‚ö†Ô∏è BORDERLINE! 5/10! You\'re right at the edge. I need more honesty and depth from you. üí≠</span>';
            } else if (score === 4) {
                gradeMessage.innerHTML = '<span class="fail-message">üòî LOW SCORE! 4/10! I sense real doubt in your answers. Help me understand your true feelings. üòî</span>';
            } else if (score === 3) {
                gradeMessage.innerHTML = '<span class="fail-message">üòû VERY LOW! 3/10! Your answers worry me. Can we sit down and have a real conversation about us? üòû</span>';
            } else if (score <= 2) {
                gradeMessage.innerHTML = '<span class="fail-message">üíî FAILED! You didn\'t pass. Your answers show dishonesty or lack of commitment. I need genuine love, not games. üíî</span>';
            }
        }
        
        function submitSecret() {
            const input = document.getElementById('secretInput');
            const secret = input.value.trim();
            
            if (!secret) {
                alert('Tell me what\'s in your heart, my love üíï');
                return;
            }
            
            const timestamp = new Date().toLocaleString();
            const data = {
                type: 'secret',
                name: recipientName,
                message: secret,
                submittedAt: timestamp,
                from: senderName,
                score: score
            };
            
            const encrypted = CryptoJS.AES.encrypt(JSON.stringify(data), ENCRYPTION_KEY).toString();
            
            let responses = JSON.parse(localStorage.getItem('valentineResponses')) || [];
            responses.push(encrypted);
            localStorage.setItem('valentineResponses', JSON.stringify(responses));
            
            console.log('üíï SECRET RECEIVED üíï');
            console.log('From: ' + data.name);
            console.log('Secret: ' + data.message);
            
            document.getElementById('secretMessage').classList.add('show');
            input.disabled = true;
            
            // Stop background music after secret is submitted
            setTimeout(() => {
                stopBackgroundMusic();
            }, 1000);
        }
        
        function submitValentineWish() {
            const input = document.getElementById('valentineInput');
            const wish = input.value.trim();
            
            if (!wish) {
                alert('Tell me what you want for Valentine\'s Day, my love üíï');
                return;
            }
            
            const timestamp = new Date().toLocaleString();
            const data = {
                type: 'wish',
                name: recipientName,
                message: wish,
                submittedAt: timestamp,
                from: senderName,
                score: score
            };
            
            const encrypted = CryptoJS.AES.encrypt(JSON.stringify(data), ENCRYPTION_KEY).toString();
            
            let responses = JSON.parse(localStorage.getItem('valentineResponses')) || [];
            responses.push(encrypted);
            localStorage.setItem('valentineResponses', JSON.stringify(responses));
            
            console.log('üéÅ VALENTINE WISH RECEIVED üéÅ');
            console.log('From: ' + data.name);
            console.log('Wish: ' + data.message);
            
            document.getElementById('submissionMessage').classList.add('show');
            input.disabled = true;
            
            // Stop background music after wish is submitted (quiz complete)
            setTimeout(() => {
                stopBackgroundMusic();
            }, 1000);
        }
        
        function goToAdmin() {
            document.getElementById('mainContainer').style.display = 'none';
            document.getElementById('adminContainer').classList.add('active');
            document.getElementById('adminPassword').focus();
        }
        
        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            
            if (password === ADMIN_PASSWORD) {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminPanel').classList.add('active');
                loadAdminSettings();
                loadResponses();
            } else {
                alert('‚ùå Incorrect password!');
                document.getElementById('adminPassword').value = '';
            }
        }
        
        function loadAdminSettings() {
            const settings = JSON.parse(localStorage.getItem('valentineSettings')) || {};
            document.getElementById('recipientName').value = settings.recipientName || 'Khadijah Mansaray';
            document.getElementById('senderNameInput').value = settings.senderName || 'James';
        }
        
        function loadResponses() {
            const encrypted = JSON.parse(localStorage.getItem('valentineResponses')) || [];
            const container = document.getElementById('responsesContainer');
            
            document.getElementById('totalResponses').textContent = encrypted.length;
            
            if (encrypted.length === 0) {
                container.innerHTML = '<div class="no-responses">No responses yet. Share the link to get started!</div>';
                return;
            }
            
            container.innerHTML = '';
            
            encrypted.forEach((enc, index) => {
                try {
                    const decrypted = CryptoJS.AES.decrypt(enc, ENCRYPTION_KEY).toString(CryptoJS.enc.Utf8);
                    const data = JSON.parse(decrypted);
                    
                    const card = document.createElement('div');
                    card.className = 'response-card';
                    
                    let title = `Response #${index + 1}`;
                    let icon = 'üí≠';
                    let content = '';
                    
                    if (data.type === 'questions') {
                        // Display Q&A responses
                        title = `üìã All Questions & Answers`;
                        icon = 'üìã';
                        
                        const scoreColor = data.score >= 7 ? '#32CD32' : data.score >= 5 ? '#FFA500' : '#FF6B6B';
                        const scoreText = `Score: ${data.score}/${data.totalQuestions}`;
                        
                        content = `
                            <h3>
                                ${icon} ${title}
                                <span class="score-badge" style="background: ${scoreColor};">${scoreText}</span>
                            </h3>
                            <p><strong>From:</strong> ${data.name}</p>
                            <p><strong>Questions Answered:</strong> ${data.totalQuestions}</p>
                            <div style="margin-top: 20px;">
                        `;
                        
                        // Add each question and answer
                        data.answers.forEach((qa) => {
                            const statusIcon = qa.correct ? '‚úÖ' : '‚ùå';
                            content += `
                                <div style="background: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid ${qa.correct ? '#32CD32' : '#FF6B6B'};">
                                    <p><strong>${statusIcon} Q${qa.questionNumber}:</strong> ${qa.question}</p>
                                    <p style="margin-top: 10px; font-style: italic; color: #333;"><strong>Answer:</strong> "${qa.answer}"</p>
                                </div>
                            `;
                        });
                        
                        content += `</div><p style="color: #999; font-size: 12px; margin-top: 15px;"><strong>Submitted:</strong> ${data.submittedAt}</p>`;
                        card.innerHTML = content;
                    } else if (data.type === 'wish') {
                        title = `Valentine's Wish`;
                        icon = 'üéÅ';
                        
                        card.innerHTML = `
                            <h3>
                                ${icon} ${title}
                                <span class="score-badge">Score: ${data.score}/10</span>
                            </h3>
                            <p><strong>From:</strong> ${data.name}</p>
                            <p><strong>Message:</strong></p>
                            <p style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #ff1493; font-style: italic;">"${data.message}"</p>
                            <p style="color: #999; font-size: 12px;"><strong>Submitted:</strong> ${data.submittedAt}</p>
                        `;
                    } else if (data.type === 'secret') {
                        title = `Secret Thought`;
                        icon = 'ü§´';
                        
                        card.innerHTML = `
                            <h3>
                                ${icon} ${title}
                                <span class="score-badge">Score: ${data.score}/10</span>
                            </h3>
                            <p><strong>From:</strong> ${data.name}</p>
                            <p><strong>Message:</strong></p>
                            <p style="background: white; padding: 15px; border-radius: 8px; border-left: 3px solid #ff1493; font-style: italic;">"${data.message}"</p>
                            <p style="color: #999; font-size: 12px;"><strong>Submitted:</strong> ${data.submittedAt}</p>
                        `;
                    }
                    
                    container.appendChild(card);
                } catch (e) {
                    console.error('Error decrypting response:', e);
                }
            });
        }
        
        function adminLogout() {
            document.getElementById('adminPassword').value = '';
            document.getElementById('adminLogin').style.display = 'flex';
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('adminContainer').classList.remove('active');
            document.getElementById('mainContainer').style.display = 'block';
        }
        
        // Initialize
        loadSettings();
        
        // Keyboard navigation
        document.addEventListener('keydown', function(event) {
            // Space to start puzzle from intro
            if (event.key === ' ' && document.getElementById('introSection').offsetParent !== null) {
                event.preventDefault();
                startPuzzle();
            }
            // Enter on start button
            if (event.key === 'Enter' && document.activeElement?.classList.contains('start-button')) {
                event.preventDefault();
                startPuzzle();
            }
        });
        
        // Play romantic background music/ambient sound on page load
        function initializeAudio() {
            // Create a gentle romantic ambience
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                // Create a continuous gentle tone in the background
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 432; // Love frequency
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                oscillator.start();
                
                // Fade out after a few seconds
                setTimeout(() => {
                    gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 2);
                }, 3000);
            } catch(e) {
                console.log('Audio context not available');
            }
        }
        
        // Initialize audio on user interaction
        document.addEventListener('click', initializeAudio, { once: true });
        document.addEventListener('scroll', initializeAudio, { once: true });
        
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
